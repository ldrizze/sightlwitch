[gd_scene load_steps=26 format=3 uid="uid://cmjgwaoqjwfwl"]

[ext_resource type="Script" path="res://levels-scripts/level_2_script.gd" id="1_le8ec"]
[ext_resource type="Script" path="res://character_script.gd" id="2_cosk0"]
[ext_resource type="SpriteFrames" uid="uid://gtxt1ly4x1kq" path="res://character_anim.tres" id="3_c4b52"]
[ext_resource type="AudioStream" uid="uid://did7rv621lxv1" path="res://sfx/light-switch-81967.mp3" id="4_0yavm"]
[ext_resource type="TileSet" uid="uid://bdvy6cg5kke5k" path="res://red_tile_set.tres" id="5_ds6jt"]
[ext_resource type="AudioStream" uid="uid://d2hptohti3ffr" path="res://sfx/350905__cabled_mess__jump_c_05.wav" id="5_ndbtw"]
[ext_resource type="Texture2D" uid="uid://dodimdsaeofg2" path="res://vendor/1-Bit Platformer Pack/Tiles/Transparent/tile_0097.png" id="6_56fnj"]
[ext_resource type="AudioStream" uid="uid://cmi0y0sx75m8n" path="res://sfx/landing.wav" id="6_olms6"]
[ext_resource type="AudioStream" uid="uid://b4wsmff00tpa4" path="res://sfx/646672__sounddesignforyou__coin-pickup-sfx-2.wav" id="7_27a81"]
[ext_resource type="SpriteFrames" uid="uid://d0dbjj6xx7jjl" path="res://door_anim.tres" id="7_gu7b7"]
[ext_resource type="AudioStream" uid="uid://bm0fw758kdtxr" path="res://sfx/443276__loscolt890__gravelfootstep003.wav" id="8_1itxe"]
[ext_resource type="Texture2D" uid="uid://b4fg2kx57xe6l" path="res://switch.png" id="8_8enq3"]
[ext_resource type="TileSet" uid="uid://c4crmo1po74jt" path="res://raw_map_tile_set.tres" id="8_o3gv8"]
[ext_resource type="AudioStream" uid="uid://bax220aygkbcx" path="res://sfx/443277__loscolt890__gravelfootstep002.wav" id="9_36cem"]
[ext_resource type="Script" path="res://BackgroundColor.gd" id="9_fwt8j"]
[ext_resource type="Texture2D" uid="uid://dpem0yp5hamx4" path="res://level-design/2.PNG" id="10_gsn2r"]
[ext_resource type="AudioStream" uid="uid://yl7a41422l1" path="res://sfx/443278__loscolt890__gravelfootstep001.wav" id="10_jg6id"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_xyr5i"]
size = Vector2(7, 8)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_2boxm"]
size = Vector2(2, 1)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_7tvwx"]
size = Vector2(4.25, 8)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_eh0eq"]
size = Vector2(7, 6)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_pw2v7"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_euvql"]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_rid4r"]
size = Vector2(20, 369)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_obdex"]
size = Vector2(20, 369)

[node name="main" type="Node2D"]
script = ExtResource("1_le8ec")

[node name="Camera2D" type="Camera2D" parent="."]
anchor_mode = 0

[node name="CharacterBody2D" type="CharacterBody2D" parent="." node_paths=PackedStringArray("spawn")]
z_index = 1
position = Vector2(53, 235)
collision_mask = 6
script = ExtResource("2_cosk0")
GRAVITY = 9.81
jump_force = 85.0
walk_velocity = 120.0
mass = 15.0
spawn = NodePath("../Spawn")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="CharacterBody2D"]
position = Vector2(1, -6)
sprite_frames = ExtResource("3_c4b52")
animation = &"idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D"]
position = Vector2(-0.75, 2)
shape = SubResource("RectangleShape2D_xyr5i")

[node name="Foot" type="Area2D" parent="CharacterBody2D"]
position = Vector2(0, 20)
collision_layer = 0
collision_mask = 6

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D/Foot"]
position = Vector2(-0.75, -13.5)
shape = SubResource("RectangleShape2D_2boxm")
debug_color = Color(0.913725, 0.235294, 0.443137, 0.419608)

[node name="Pick" type="Area2D" parent="CharacterBody2D"]
collision_mask = 480

[node name="CollisionShape2D" type="CollisionShape2D" parent="CharacterBody2D/Pick"]
position = Vector2(3.375, 2)
shape = SubResource("RectangleShape2D_7tvwx")
debug_color = Color(0.92549, 0.152941, 0.572549, 0.419608)

[node name="CollisionShape2D2" type="CollisionShape2D" parent="CharacterBody2D/Pick"]
position = Vector2(-5, 2)
shape = SubResource("RectangleShape2D_7tvwx")
debug_color = Color(0.92549, 0.152941, 0.572549, 0.419608)

[node name="RespawnTimer" type="Timer" parent="CharacterBody2D"]
one_shot = true

[node name="ClickSound" type="AudioStreamPlayer" parent="CharacterBody2D"]
stream = ExtResource("4_0yavm")
volume_db = -10.0

[node name="Jump" type="AudioStreamPlayer" parent="CharacterBody2D"]
stream = ExtResource("5_ndbtw")

[node name="Land" type="AudioStreamPlayer" parent="CharacterBody2D"]
stream = ExtResource("6_olms6")
volume_db = -10.0

[node name="KeyPick" type="AudioStreamPlayer" parent="CharacterBody2D"]
stream = ExtResource("7_27a81")
volume_db = -3.0

[node name="FootstepsSFX" type="Node" parent="CharacterBody2D"]

[node name="FS1" type="AudioStreamPlayer" parent="CharacterBody2D/FootstepsSFX"]
stream = ExtResource("8_1itxe")
volume_db = -12.0
pitch_scale = 3.0

[node name="FS2" type="AudioStreamPlayer" parent="CharacterBody2D/FootstepsSFX"]
stream = ExtResource("9_36cem")
volume_db = -12.0
pitch_scale = 3.0

[node name="FS3" type="AudioStreamPlayer" parent="CharacterBody2D/FootstepsSFX"]
stream = ExtResource("10_jg6id")
volume_db = -12.0
pitch_scale = 3.0

[node name="Spawn" type="Marker2D" parent="."]
position = Vector2(53, 223)

[node name="Map" type="Node" parent="."]

[node name="Terrain" type="TileMap" parent="Map" groups=["terrain"]]
tile_set = ExtResource("8_o3gv8")
format = 2
layer_0/tile_data = PackedInt32Array(1048576, 458752, 4, 1048577, 524288, 4, 1048578, 524288, 4, 1048579, 524288, 4, 1048580, 524288, 4, 1048581, 524288, 4, 1048582, 524288, 4, 1048583, 524288, 4, 1048584, 524288, 4, 1048585, 524288, 4, 1048586, 524288, 4, 1048587, 524288, 4, 1048588, 524288, 4, 1048589, 524288, 4, 1048590, 524288, 4, 1048591, 524288, 4, 1048592, 524288, 4, 1048593, 524288, 4, 1048594, 524288, 4, 1048595, 524288, 4, 1048596, 524288, 4, 1048597, 524288, 4, 1048598, 524288, 4, 1048599, 524288, 4, 1048600, 524288, 4, 1048601, 524288, 4, 1048602, 524288, 4, 1048603, 524288, 4, 1048604, 524288, 4, 1048605, 524288, 4, 1048606, 524288, 4, 1048607, 524288, 4, 1048608, 524288, 4, 1048609, 524288, 4, 1048610, 524288, 4, 1048611, 524288, 4, 1048612, 524288, 4, 1048613, 524288, 4, 1048614, 524288, 4, 1048615, 589824, 4, 1114113, 524288, 5, 1179649, 524288, 5, 1245185, 524288, 5, 1310721, 524288, 5, 1376257, 524288, 5, 1441793, 524288, 5, 1114114, 524288, 5, 1179650, 524288, 5, 1245186, 524288, 5, 1310722, 524288, 5, 1376258, 524288, 5, 1441794, 524288, 5, 1114115, 524288, 5, 1179651, 524288, 5, 1245187, 524288, 5, 1310723, 524288, 5, 1376259, 524288, 5, 1441795, 524288, 5, 1114116, 524288, 5, 1179652, 524288, 5, 1245188, 524288, 5, 1310724, 524288, 5, 1376260, 524288, 5, 1441796, 524288, 5, 1114117, 524288, 5, 1179653, 524288, 5, 1245189, 524288, 5, 1310725, 524288, 5, 1376261, 524288, 5, 1441797, 524288, 5, 1114118, 524288, 5, 1179654, 524288, 5, 1245190, 524288, 5, 1310726, 524288, 5, 1376262, 524288, 5, 1441798, 524288, 5, 1114119, 524288, 5, 1179655, 524288, 5, 1245191, 524288, 5, 1310727, 524288, 5, 1376263, 524288, 5, 1441799, 524288, 5, 1114120, 524288, 5, 1179656, 524288, 5, 1245192, 524288, 5, 1310728, 524288, 5, 1376264, 524288, 5, 1441800, 524288, 5, 1114121, 524288, 5, 1179657, 524288, 5, 1245193, 524288, 5, 1310729, 524288, 5, 1376265, 524288, 5, 1441801, 524288, 5, 1114122, 524288, 5, 1179658, 524288, 5, 1245194, 524288, 5, 1310730, 524288, 5, 1376266, 524288, 5, 1441802, 524288, 5, 1114123, 524288, 5, 1179659, 524288, 5, 1245195, 524288, 5, 1310731, 524288, 5, 1376267, 524288, 5, 1441803, 524288, 5, 1114124, 524288, 5, 1179660, 524288, 5, 1245196, 524288, 5, 1310732, 524288, 5, 1376268, 524288, 5, 1441804, 524288, 5, 1114125, 524288, 5, 1179661, 524288, 5, 1245197, 524288, 5, 1310733, 524288, 5, 1376269, 524288, 5, 1441805, 524288, 5, 1114126, 524288, 5, 1179662, 524288, 5, 1245198, 524288, 5, 1310734, 524288, 5, 1376270, 524288, 5, 1441806, 524288, 5, 1114127, 524288, 5, 1179663, 524288, 5, 1245199, 524288, 5, 1310735, 524288, 5, 1376271, 524288, 5, 1441807, 524288, 5, 1114128, 524288, 5, 1179664, 524288, 5, 1245200, 524288, 5, 1310736, 524288, 5, 1376272, 524288, 5, 1441808, 524288, 5, 1114129, 524288, 5, 1179665, 524288, 5, 1245201, 524288, 5, 1310737, 524288, 5, 1376273, 524288, 5, 1441809, 524288, 5, 1114130, 524288, 5, 1179666, 524288, 5, 1245202, 524288, 5, 1310738, 524288, 5, 1376274, 524288, 5, 1441810, 524288, 5, 1114131, 524288, 5, 1179667, 524288, 5, 1245203, 524288, 5, 1310739, 524288, 5, 1376275, 524288, 5, 1441811, 524288, 5, 1114132, 524288, 5, 1179668, 524288, 5, 1245204, 524288, 5, 1310740, 524288, 5, 1376276, 524288, 5, 1441812, 524288, 5, 1114133, 524288, 5, 1179669, 524288, 5, 1245205, 524288, 5, 1310741, 524288, 5, 1376277, 524288, 5, 1441813, 524288, 5, 1114134, 524288, 5, 1179670, 524288, 5, 1245206, 524288, 5, 1310742, 524288, 5, 1376278, 524288, 5, 1441814, 524288, 5, 1114135, 524288, 5, 1179671, 524288, 5, 1245207, 524288, 5, 1310743, 524288, 5, 1376279, 524288, 5, 1441815, 524288, 5, 1114136, 524288, 5, 1179672, 524288, 5, 1245208, 524288, 5, 1310744, 524288, 5, 1376280, 524288, 5, 1441816, 524288, 5, 1114137, 524288, 5, 1179673, 524288, 5, 1245209, 524288, 5, 1310745, 524288, 5, 1376281, 524288, 5, 1441817, 524288, 5, 1114138, 524288, 5, 1179674, 524288, 5, 1245210, 524288, 5, 1310746, 524288, 5, 1376282, 524288, 5, 1441818, 524288, 5, 1114139, 524288, 5, 1179675, 524288, 5, 1245211, 524288, 5, 1310747, 524288, 5, 1376283, 524288, 5, 1441819, 524288, 5, 1114140, 524288, 5, 1179676, 524288, 5, 1245212, 524288, 5, 1310748, 524288, 5, 1376284, 524288, 5, 1441820, 524288, 5, 1114141, 524288, 5, 1179677, 524288, 5, 1245213, 524288, 5, 1310749, 524288, 5, 1376285, 524288, 5, 1441821, 524288, 5, 1114142, 524288, 5, 1179678, 524288, 5, 1245214, 524288, 5, 1310750, 524288, 5, 1376286, 524288, 5, 1441822, 524288, 5, 1114143, 524288, 5, 1179679, 524288, 5, 1245215, 524288, 5, 1310751, 524288, 5, 1376287, 524288, 5, 1441823, 524288, 5, 1114144, 524288, 5, 1179680, 524288, 5, 1245216, 524288, 5, 1310752, 524288, 5, 1376288, 524288, 5, 1441824, 524288, 5, 1114145, 524288, 5, 1179681, 524288, 5, 1245217, 524288, 5, 1310753, 524288, 5, 1376289, 524288, 5, 1441825, 524288, 5, 1114146, 524288, 5, 1179682, 524288, 5, 1245218, 524288, 5, 1310754, 524288, 5, 1376290, 524288, 5, 1441826, 524288, 5, 1114147, 524288, 5, 1179683, 524288, 5, 1245219, 524288, 5, 1310755, 524288, 5, 1376291, 524288, 5, 1441827, 524288, 5, 1114148, 524288, 5, 1179684, 524288, 5, 1245220, 524288, 5, 1310756, 524288, 5, 1376292, 524288, 5, 1441828, 524288, 5, 1114149, 524288, 5, 1179685, 524288, 5, 1245221, 524288, 5, 1310757, 524288, 5, 1376293, 524288, 5, 1441829, 524288, 5, 1114150, 524288, 5, 1179686, 524288, 5, 1245222, 524288, 5, 1310758, 524288, 5, 1376294, 524288, 5, 1441830, 524288, 5, 1114151, 589824, 5, 1179687, 589824, 5, 1245223, 589824, 5, 1310759, 589824, 5, 1376295, 589824, 5, 1441831, 589824, 5, 1114112, 458752, 5, 1179648, 458752, 5, 1245184, 458752, 5, 1310720, 458752, 5, 1376256, 458752, 5, 1441792, 458752, 5)

[node name="RedTerrain" type="TileMap" parent="Map" groups=["red"]]
tile_set = ExtResource("5_ds6jt")
format = 2
layer_0/tile_data = PackedInt32Array(983049, 720896, 3, 983050, 720896, 3, 983051, 720896, 3, 917515, 720896, 3, 917514, 720896, 3, 917513, 720896, 3, 851977, 720896, 3, 851978, 720896, 3, 851979, 720896, 3, 983056, 720896, 3, 983057, 720896, 3, 983058, 720896, 3, 917522, 720896, 3, 917521, 720896, 3, 917520, 720896, 3, 851984, 720896, 3, 851985, 720896, 3, 851986, 720896, 3, 786450, 720896, 3, 786449, 720896, 3, 786448, 720896, 3, 720912, 720896, 3, 720913, 720896, 3, 720914, 720896, 3)

[node name="Key" type="Node2D" parent="Map"]
position = Vector2(280, 169)

[node name="Area2D" type="Area2D" parent="Map/Key" groups=["key"]]
collision_layer = 32

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Key/Area2D"]
shape = SubResource("RectangleShape2D_eh0eq")
debug_color = Color(0.317647, 0.619608, 0.27451, 0.419608)

[node name="KeySprite" type="Sprite2D" parent="Map/Key"]
texture = ExtResource("6_56fnj")

[node name="Door" type="Node2D" parent="Map"]
position = Vector2(592, 249)

[node name="Area2D" type="Area2D" parent="Map/Door" groups=["door"]]
collision_layer = 64

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/Door/Area2D"]
shape = SubResource("RectangleShape2D_pw2v7")
debug_color = Color(0.686275, 0.494118, 0.219608, 0.419608)

[node name="DoorSprite" type="AnimatedSprite2D" parent="Map/Door"]
sprite_frames = ExtResource("7_gu7b7")

[node name="BlueSwitch" type="Node2D" parent="Map"]
position = Vector2(327, 13)

[node name="Sprite2D" type="Sprite2D" parent="Map/BlueSwitch"]
texture = ExtResource("8_8enq3")

[node name="BlueSwitch" type="Area2D" parent="Map/BlueSwitch" groups=["blue_switch"]]
collision_layer = 128

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/BlueSwitch/BlueSwitch"]
shape = SubResource("RectangleShape2D_euvql")
debug_color = Color(0.784314, 0.431373, 0.0823529, 0.419608)

[node name="RedSwitch" type="Node2D" parent="Map"]
position = Vector2(99, 242)

[node name="Sprite2D" type="Sprite2D" parent="Map/RedSwitch"]
texture = ExtResource("8_8enq3")

[node name="RedSwitch" type="Area2D" parent="Map/RedSwitch"]
collision_layer = 256

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/RedSwitch/RedSwitch"]
shape = SubResource("RectangleShape2D_euvql")
debug_color = Color(0.784314, 0.431373, 0.0823529, 0.419608)

[node name="BackgroundColor" type="Node2D" parent="Map"]
z_index = -1
script = ExtResource("9_fwt8j")

[node name="LeftWall" type="StaticBody2D" parent="Map"]
position = Vector2(-6, 362)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/LeftWall"]
position = Vector2(0, -174.5)
shape = SubResource("RectangleShape2D_rid4r")

[node name="RightWall" type="StaticBody2D" parent="Map"]
position = Vector2(646, 362)
collision_layer = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Map/RightWall"]
position = Vector2(0, -174.5)
shape = SubResource("RectangleShape2D_obdex")

[node name="2" type="Sprite2D" parent="."]
visible = false
modulate = Color(0.196078, 0.196078, 0.196078, 0.529412)
position = Vector2(320, 206)
scale = Vector2(0.515124, 0.515123)
texture = ExtResource("10_gsn2r")

[node name="VFlowContainer" type="HFlowContainer" parent="."]
offset_left = 111.0
offset_right = 528.0
offset_bottom = 50.0

[node name="CenterContainer" type="CenterContainer" parent="VFlowContainer"]
layout_mode = 2

[node name="Label" type="Label" parent="VFlowContainer/CenterContainer"]
layout_mode = 2
text = "Press E on the light switch (   ) and the magic happens!"

[node name="CenterContainer2" type="CenterContainer" parent="VFlowContainer"]
layout_mode = 2

[node name="Label2" type="Label" parent="VFlowContainer/CenterContainer2"]
layout_mode = 2
text = "Press Spacebar to jump"

[node name="NextSceneTimer" type="Timer" parent="."]
wait_time = 2.0
one_shot = true

[connection signal="animation_finished" from="CharacterBody2D/AnimatedSprite2D" to="CharacterBody2D" method="_on_animated_sprite_2d_animation_finished"]
[connection signal="body_entered" from="CharacterBody2D/Foot" to="CharacterBody2D" method="_on_area_2d_body_entered"]
[connection signal="area_entered" from="CharacterBody2D/Pick" to="CharacterBody2D" method="_on_pick_area_entered"]
[connection signal="timeout" from="CharacterBody2D/RespawnTimer" to="CharacterBody2D" method="_on_respawn_timer_timeout"]
[connection signal="area_entered" from="Map/Door/Area2D" to="CharacterBody2D" method="_on_area_2d_area_entered"]
[connection signal="area_entered" from="Map/BlueSwitch/BlueSwitch" to="CharacterBody2D" method="_on_blue_switch_area_entered"]
[connection signal="area_exited" from="Map/BlueSwitch/BlueSwitch" to="CharacterBody2D" method="_on_blue_switch_area_exited"]
[connection signal="area_entered" from="Map/RedSwitch/RedSwitch" to="CharacterBody2D" method="_on_red_switch_area_entered"]
[connection signal="area_exited" from="Map/RedSwitch/RedSwitch" to="CharacterBody2D" method="_on_red_switch_area_exited"]
[connection signal="timeout" from="NextSceneTimer" to="." method="_on_next_scene_timer_timeout"]
